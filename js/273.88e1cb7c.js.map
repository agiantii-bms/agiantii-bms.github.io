{"version":3,"file":"js/273.88e1cb7c.js","mappings":"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","sources":["webpack://book_manage_system/./src/components/Admin/IntelligentAnalysis.vue","webpack://book_manage_system/src/components/Admin/IntelligentAnalysis.vue","webpack://book_manage_system/./src/components/Admin/IntelligentAnalysis.vue?c6d3","webpack://book_manage_system/./src/components/Admin/IntelligentAnalysis.vue?8def"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"intelligent_analysis\"},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-card',{attrs:{\"header\":\"智能分析\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"90px\",\"enctype\":\"multipart/form-data\"}},[_c('el-form-item',{attrs:{\"label\":\"分析目标: \",\"prop\":\"goal\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.goal),callback:function ($$v) {_vm.$set(_vm.form, \"goal\", $$v)},expression:\"form.goal\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图表名称: \",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图表类型: \",\"prop\":\"chartType\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择图表类型\"},model:{value:(_vm.form.chartType),callback:function ($$v) {_vm.$set(_vm.form, \"chartType\", $$v)},expression:\"form.chartType\"}},[_c('el-option',{attrs:{\"label\":\"折线图\",\"value\":\"折线图\"}}),_c('el-option',{attrs:{\"label\":\"柱状图\",\"value\":\"柱状图\"}}),_c('el-option',{attrs:{\"label\":\"堆叠图\",\"value\":\"堆叠图\"}}),_c('el-option',{attrs:{\"label\":\"饼图\",\"value\":\"饼图\"}}),_c('el-option',{attrs:{\"label\":\"雷达图\",\"value\":\"雷达图\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"原始数据: \"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"on-remove\":_vm.handleRemove,\"on-change\":_vm.handleChange,\"multiple\":\"\",\"limit\":1,\"on-exceed\":_vm.handleExceed,\"name\":\"file\",\"file-list\":_vm.fileList,\"auto-upload\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"icon\":\"el-icon-upload2\"}},[_vm._v(\"上传Excel文件\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 只能上传xls/xlsx文件，且不超过1MB \")])],1)],1),_c('el-form-item',[_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitting),expression:\"submitting\"}],attrs:{\"type\":\"primary\",\"disabled\":_vm.submitting},on:{\"click\":_vm.onSubmit}},[_vm._v(\"提交\")]),_c('el-button',{attrs:{\"disabled\":_vm.submitting},on:{\"click\":_vm.resetForm}},[_vm._v(\"重置\")])],1)],1)],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitting),expression:\"submitting\"}],attrs:{\"header\":\"分析结论\"}},[(_vm.chart.genResult)?_c('div',{staticStyle:{\"white-space\":\"pre-wrap\"}},[_vm._v(\" \"+_vm._s(_vm.chart.genResult)+\" \")]):_c('div',[(!_vm.submitting)?_c('div',[_vm._v(\"请先在左侧进行提交\")]):_vm._e()])]),_c('el-divider'),_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitting),expression:\"submitting\"}],attrs:{\"header\":\"可视化图表\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chart.genChart),expression:\"chart.genChart\"}]},[_c('div',{ref:\"chartContainer\",staticClass:\"chartContainer\",staticStyle:{\"width\":\"100%\",\"height\":\"50vh\"}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.chart.genChart),expression:\"!chart.genChart\"}]},[(!_vm.submitting)?_c('div',{on:{\"click\":function($event){return _vm.createChart()}}},[_vm._v(\" 请先在左侧进行提交 \")]):_vm._e()])])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"intelligent_analysis\">\r\n    <el-row :gutter=\"24\">\r\n      <el-col :span=\"12\">\r\n        <el-card header=\"智能分析\">\r\n          <el-form\r\n            ref=\"form\"\r\n            :model=\"form\"\r\n            :rules=\"rules\"\r\n            label-width=\"90px\"\r\n            enctype=\"multipart/form-data\"\r\n          >\r\n            <el-form-item label=\"分析目标: \" prop=\"goal\">\r\n              <el-input type=\"textarea\" v-model=\"form.goal\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"图表名称: \" prop=\"name\">\r\n              <el-input v-model=\"form.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"图表类型: \" prop=\"chartType\">\r\n              <el-select v-model=\"form.chartType\" placeholder=\"请选择图表类型\">\r\n                <el-option label=\"折线图\" value=\"折线图\"></el-option>\r\n                <el-option label=\"柱状图\" value=\"柱状图\"></el-option>\r\n                <el-option label=\"堆叠图\" value=\"堆叠图\"></el-option>\r\n                <el-option label=\"饼图\" value=\"饼图\"></el-option>\r\n                <el-option label=\"雷达图\" value=\"雷达图\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"原始数据: \">\r\n              <el-upload\r\n                class=\"upload-demo\"\r\n                action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                :on-remove=\"handleRemove\"\r\n                :on-change=\"handleChange\"\r\n                multiple\r\n                :limit=\"1\"\r\n                :on-exceed=\"handleExceed\"\r\n                name=\"file\"\r\n                :file-list=\"fileList\"\r\n                ref=\"upload\"\r\n                :auto-upload=\"false\"\r\n              >\r\n                <el-button size=\"small\" type=\"success\" icon=\"el-icon-upload2\"\r\n                  >上传Excel文件</el-button\r\n                >\r\n                <div slot=\"tip\" class=\"el-upload__tip\">\r\n                  只能上传xls/xlsx文件，且不超过1MB\r\n                </div>\r\n              </el-upload>\r\n            </el-form-item>\r\n\r\n            <el-form-item>\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"onSubmit\"\r\n                v-loading=\"submitting\"\r\n                :disabled=\"submitting\"\r\n                >提交</el-button\r\n              >\r\n              <el-button @click=\"resetForm\" :disabled=\"submitting\"\r\n                >重置</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-card header=\"分析结论\" v-loading=\"submitting\">\r\n          <div v-if=\"chart.genResult\" style=\"white-space: pre-wrap\">\r\n            {{ chart.genResult }}\r\n            <!-- 根据具体的需求来显示生成结果 -->\r\n          </div>\r\n          <div v-else>\r\n            <div v-if=\"!submitting\">请先在左侧进行提交</div>\r\n          </div>\r\n        </el-card>\r\n        <el-divider></el-divider>\r\n        <el-card header=\"可视化图表\" v-loading=\"submitting\">\r\n          <div v-show=\"chart.genChart\">\r\n            <div\r\n              ref=\"chartContainer\"\r\n              style=\"width: 100%; height: 50vh\"\r\n              class=\"chartContainer\"\r\n            ></div>\r\n          </div>\r\n          <div v-show=\"!chart.genChart\">\r\n            <div v-if=\"!submitting\" @click=\"createChart()\">\r\n              请先在左侧进行提交\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as echarts from \"echarts\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        goal: \"\",\r\n        name: \"\",\r\n        chartType: \"\",\r\n        adminId: undefined,\r\n      },\r\n      file: {},\r\n      rules: {\r\n        goal: [\r\n          { required: true, message: \"请输入分析目标\", trigger: \"blur\" },\r\n          {\r\n            min: 5,\r\n            max: 100,\r\n            message: \"长度在 5 到 100 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      chart: {\r\n        genChart: \"\",\r\n        genResult: \"\",\r\n        chartId: \"\",\r\n      },\r\n      resultChart: {},\r\n      fileList: [],\r\n      submitting: false,\r\n    };\r\n  },\r\n  methods: {\r\n    // 文件数量超过限制\r\n    handleExceed(files, fileList) {\r\n      this.$message.info({\r\n        message: \"最多只能上传一个文件\",\r\n        duration: 1500,\r\n      });\r\n    },\r\n    // 文件状态发生改变回调(添加文件、上传成功和上传失败时都会被调用)\r\n    handleChange(file, fileList) {\r\n      // 1. 检查文件类型 只能为xls或者xlsx\\\r\n      // 第一种是xls 第二种是xlsx\r\n      const acceptTypeList = [\r\n        \"application/vnd.ms-excel\",\r\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n      ];\r\n      // 表示用户上传的文件类型不在允许范围内\r\n      if (acceptTypeList.indexOf(file.raw.type) === -1) {\r\n        this.$message.info({\r\n          message: \"只允许xls或者xlsx格式的文件上传\",\r\n          duration: 1500,\r\n        });\r\n        this.handleRemove(file);\r\n        return;\r\n      }\r\n      // 2.检查文件大小是否大于1MB\r\n      const acceptSize = 1 * 1024 * 1024;\r\n      if (file.raw.size > acceptSize) {\r\n        this.$message.info({\r\n          message: \"只允许文件大小在1MB之内的Excel文件\",\r\n          duration: 1500,\r\n        });\r\n        this.handleRemove(file);\r\n        return;\r\n      }\r\n      this.file = file.raw;\r\n    },\r\n    async onSubmit() {\r\n      if (this.submitting) {\r\n        return;\r\n      }\r\n      this.submitting = true;\r\n      const formData = new FormData();\r\n\r\n      if (this.file) {\r\n        formData.append(\"file\", this.file);\r\n      }\r\n      this.form.adminId = parseInt(window.sessionStorage.getItem(\"adminId\"));\r\n      for (const key in this.form) {\r\n        formData.append(key, this.form[key]);\r\n      }\r\n      this.$message.info({\r\n        message: \"接口调用花费时间在30秒左右，AI模型暂时不稳定\",\r\n        duration: 2500,\r\n      });\r\n      const { data: res } = await this.$http.post(\"/admin/gen\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n      if (res.status !== 200) {\r\n        this.submitting = false;\r\n        return this.$message.error({\r\n          message: res.msg,\r\n          duration: 1500,\r\n        });\r\n      }\r\n      this.chart = res.data;\r\n      this.resultChart = res.map.genChart;\r\n      this.createChart();\r\n      this.$message.success({\r\n        message: res.msg,\r\n        duration: 1500,\r\n      });\r\n      this.submitting = false;\r\n    },\r\n    createChart() {\r\n      const chartOption = this.resultChart;\r\n      if (!chartOption) {\r\n        return this.$message.error({\r\n          message: \"图表代码解析错误\",\r\n          duration: 1500,\r\n        });\r\n      }\r\n      this.$nextTick(() => {\r\n        const chart = echarts.init(this.$refs.chartContainer);\r\n        chart.setOption(chartOption);\r\n      });\r\n    },\r\n    resetForm() {\r\n      this.$refs.form.resetFields();\r\n      this.handleRemove();\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList;\r\n      this.fileList = [];\r\n      this.file = {};\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n</script>\r\n<style scoped lang=\"less\"></style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IntelligentAnalysis.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IntelligentAnalysis.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IntelligentAnalysis.vue?vue&type=template&id=f04b0d60&scoped=true&\"\nimport script from \"./IntelligentAnalysis.vue?vue&type=script&lang=js&\"\nexport * from \"./IntelligentAnalysis.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f04b0d60\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","ref","form","rules","model","value","goal","callback","$$v","$set","expression","name","chartType","handleRemove","handleChange","handleExceed","fileList","_v","slot","directives","rawName","submitting","on","onSubmit","resetForm","chart","genResult","staticStyle","_s","_e","genChart","$event","createChart","staticRenderFns","data","adminId","file","required","message","trigger","min","max","chartId","resultChart","methods","duration","formData","headers","mounted","component"],"sourceRoot":""}