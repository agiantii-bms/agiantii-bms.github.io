"use strict";(self["webpackChunkbook_manage_system"]=self["webpackChunkbook_manage_system"]||[]).push([[835],{6835:function(s,e,t){t.r(e),t.d(e,{default:function(){return g}});var a=function(){var s=this,e=s._self._c;return e("div",{staticClass:"chat-container"},[e("h2",{staticStyle:{"text-align":"center",color:"deepskyblue"}},[s._v("AI 智能推荐 by小白条")]),e("el-card",{staticClass:"chat",staticStyle:{"margin-top":"10px",height:"80vh","border-radius":"15px","border-color":"#ccc"}},[e("el-card",{staticClass:"main_chat"},s._l(s.messages,(function(t){return e("div",{key:s.message.id,staticClass:"message"},[null!=t.inputMessage&&""!==t.inputMessage?e("div",{staticClass:"user-message"},[s._v(" "+s._s(t.inputMessage)+" ")]):s._e(),null!=t.aiResult&&""!==t.aiResult?e("div",{staticClass:"bot-message"},[s._v(s._s(t.aiResult))]):s._e()])})),0),e("el-input",{attrs:{placeholder:"请输入内容，例如：我喜欢动物类的书籍，请给我推荐",disabled:s.loading},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.sendMessage.apply(null,arguments)}},model:{value:s.inputMessage,callback:function(e){s.inputMessage="string"===typeof e?e.trim():e},expression:"inputMessage"}},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:s.loading,expression:"loading"}],attrs:{slot:"append",icon:"el-icon-s-promotion",disabled:s.loading},on:{click:s.sendMessage},slot:"append"})],1)],1)],1)},i=[],n=(t(7658),{data(){return{messages:[],inputMessage:"",message:{inputMessage:"",aiResult:"",userId:null},loading:!1}},methods:{async sendMessage(){if(""===this.inputMessage.trim())return this.$message.info({message:"文本不能为空",duration:1500});if(/[\da-zA-Z]/.test(this.inputMessage))this.$message.info({message:"请不要输入无意义的内容",duration:1e3});else if(""!==this.inputMessage.trim()){var s=window.sessionStorage.getItem("userId");this.messages.push({id:Date.now(),inputMessage:this.inputMessage,userId:parseInt(s)}),this.message.inputMessage=this.inputMessage.trim(),this.message.userId=s,this.inputMessage="",this.loading=!0,this.$message.info({message:"文本输入越长，接口调用时间越长，请耐心等待10秒左右",duration:2500});const{data:e}=await this.$http.post("user/ai_intelligent",this.message);if(200!==e.status)return this.loading=!1,this.$message.error(e.msg);this.$message.success({message:e.msg,duration:1500}),this.messages.push({id:Date.now(),aiResult:e.data,userId:s}),this.loading=!1}},async getHistoryRecords(){var s=window.sessionStorage.getItem("userId");const{data:e}=await this.$http.get("user/ai_list_information/"+s);if(200!==e.status)return this.$message.error(e.msg);this.$message.success({message:e.msg,duration:1500}),e.data.forEach((s=>{this.messages.push(s)}))}},created(){this.getHistoryRecords()}}),r=n,u=t(1001),o=(0,u.Z)(r,a,i,!1,null,"7680cbfa",null),g=o.exports}}]);
//# sourceMappingURL=835.2fa5cb88.js.map