"use strict";(self["webpackChunkbook_manage_system"]=self["webpackChunkbook_manage_system"]||[]).push([[602],{2602:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"expire_container"},[e._m(0),t("div",{staticClass:"banner"},[t("div",{staticClass:"expireDays"},[t("p",[e._v("还剩"+e._s(this.expireInfo.expireDays)+"天")])]),t("div",{staticClass:"bookNumber"},[t("el-input",{attrs:{readonly:!0},model:{value:e.expireInfo.bookNumber,callback:function(t){e.$set(e.expireInfo,"bookNumber",t)},expression:"expireInfo.bookNumber"}},[t("template",{slot:"prepend"},[e._v("图书编号")]),t("el-button",{attrs:{slot:"prepend",icon:"el-icon-collection"},slot:"prepend"})],2)],1),t("div",{staticClass:"closeDate"},[t("el-input",{attrs:{readonly:!0},model:{value:e.expireInfo.closeDate,callback:function(t){e.$set(e.expireInfo,"closeDate",t)},expression:"expireInfo.closeDate"}},[t("template",{slot:"prepend"},[e._v("截止日期")]),t("el-button",{attrs:{slot:"prepend",icon:"el-icon-date"},slot:"prepend"})],2)],1),t("div",{staticClass:"violationMsg"},[t("el-input",{attrs:{placeholder:"若无违章信息,则不填"},model:{value:e.returnInfo.violationMessage,callback:function(t){e.$set(e.returnInfo,"violationMessage",t)},expression:"returnInfo.violationMessage"}},[t("template",{slot:"prepend"},[e._v("违章信息")]),t("el-button",{attrs:{slot:"prepend",icon:"iconfont icon-weizhangchaxun"},slot:"prepend"})],2)],1),t("div",{staticClass:"adminId"},[t("el-input",{attrs:{readonly:!0},model:{value:e.expireInfo.bookAdminId,callback:function(t){e.$set(e.expireInfo,"bookAdminId",t)},expression:"expireInfo.bookAdminId"}},[t("template",{slot:"prepend"},[e._v("管理员编号")]),t("el-button",{attrs:{slot:"prepend",icon:"el-icon-s-custom"},slot:"prepend"})],2)],1),t("div",{staticClass:"returnDate"},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择归还日期时间","default-time":"12:00:00","value-format":"yyyy-MM-dd HH:mm:ss","prefix-icon":"el-icon-date"},model:{value:e.returnInfo.returnDate,callback:function(t){e.$set(e.returnInfo,"returnDate",t)},expression:"returnInfo.returnDate"}})],1),t("div",{staticClass:"return_button"},[t("el-button",{attrs:{type:"warning"},on:{click:e.returnBook}},[e._v("归还")])],1)])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("p",[e._v("归还图书")])])}],r=(o(7658),{data(){return{returnInfo:{returnDate:"",violationMessage:"",bookNumber:0,violationAdminId:0},expireInfo:{expireDays:47,bookNumber:192,closeDate:"",bookAdminId:0}}},methods:{async getExpireInfo(){const e=this.$route.query.bookNumber,{data:t}=await this.$http.get("bookadmin/query_expire/"+e);if(200!==t.status)return this.$message.error(t.msg);this.$message.success({message:t.msg,duration:1e3}),this.expireInfo=t.data;const o=window.sessionStorage.getItem("bookAdminId");this.expireInfo.bookAdminId=parseInt(o),this.returnInfo.bookNumber=this.expireInfo.bookNumber},async returnBook(){if(""===this.returnInfo.returnDate)return void this.$message.error({message:"归还日期不能为空",duration:1e3});this.returnInfo.violationAdminId=parseInt(window.sessionStorage.getItem("bookAdminId"));const{data:e}=await this.$http.post("bookadmin/return_book",this.returnInfo);if(200!==e.status)return this.$message.error(e.msg);this.$message.success({message:e.msg,duration:1e3}),this.$router.push("/returnbook")}},created(){this.getExpireInfo()}}),i=r,a=o(1001),l=(0,a.Z)(i,s,n,!1,null,"abddb198",null),u=l.exports}}]);
//# sourceMappingURL=602.da0466a0.js.map