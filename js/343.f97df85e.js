"use strict";(self["webpackChunkbook_manage_system"]=self["webpackChunkbook_manage_system"]||[]).push([[343],{7343:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search_container"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("首页")]),t("el-breadcrumb-item",[e._v("图书查询")])],1),t("el-card",{attrs:{shadow:"always"}},[t("el-row",[t("el-col",{attrs:{span:6}},[e._v("条件搜索: "),t("el-select",{staticStyle:{"margin-left":"15px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.queryInfo.condition,callback:function(t){e.$set(e.queryInfo,"condition",t)},expression:"queryInfo.condition"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:4}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBookByPage.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBookByPage},slot:"append"})],1)],1),t("el-col",{staticStyle:{float:"right"},attrs:{span:2}},[t("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:e.tableData,fields:e.json_fields,header:e.title,name:"图书查询表格.xls"}},[t("el-button",{staticClass:"el-icon-printer",attrs:{type:"primary",size:"mini"}},[e._v("导出Excel ")])],1)],1),t("el-col",{staticStyle:{float:"right"},attrs:{span:2}},[t("el-button",{staticClass:"el-icon-printer",attrs:{type:"primary",size:"mini"},on:{click:e.downLoad}},[e._v("导出PDF ")])],1),t("el-col",{staticStyle:{float:"right"},attrs:{span:2}},[t("el-button",{staticClass:"el-icon-full-screen",attrs:{type:"success",size:"mini"},on:{click:e.fullScreen}},[e._v("全屏 ")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","font-size":"14px"},attrs:{data:e.tableData,height:"520",border:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",id:"pdfDom","default-sort":{prop:"bookNumber",order:"ascending"},stripe:""}},[t("el-table-column",{attrs:{prop:"bookNumber",label:"图书编号",sortable:""}}),t("el-table-column",{attrs:{prop:"bookName",label:"图书名称"}}),t("el-table-column",{attrs:{prop:"bookAuthor",label:"作者"}}),t("el-table-column",{attrs:{prop:"bookLibrary",label:"图书馆"}}),t("el-table-column",{attrs:{prop:"bookType",label:"分类"}}),t("el-table-column",{attrs:{prop:"bookLocation",label:"位置",sortable:""}}),t("el-table-column",{attrs:{prop:"bookStatus",label:"状态",sortable:""}}),t("el-table-column",{attrs:{prop:"bookDescription",label:"描述",width:"600px"}})],1),t("el-pagination",{attrs:{"current-page":this.queryInfo.pageNum,"page-sizes":[1,2,3,4,5],"page-size":this.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],s={data(){return{options:[{value:"book_number",label:"图书编号"},{value:"book_name",label:"图书名称"},{value:"book_author",label:"作者"},{value:"book_location",label:"位置"},{value:"book_description",label:"描述"}],tableData:[],queryInfo:{pageNum:1,pageSize:5,condition:"",query:""},total:0,title:"图书查询表格",json_fields:{"图书编号":"bookNumber","图书名称":"bookName","作者":"bookAuthor","图书馆":"bookLibrary","分类":"bookType","位置":"bookLocation","状态":"bookStatus","描述":"bookDescription"},loading:!0}},created(){this.searchBookByPage()},methods:{handleSizeChange(e){this.queryInfo.pageSize=e,this.searchBookByPage()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.searchBookByPage()},async searchBookByPage(){this.loading=!0;const{data:e}=await this.$http.post("user/search_book_page",this.queryInfo);if(this.tableData=[],200!==e.status)return this.total=0,this.loading=!1,this.$message.error(e.msg);this.$message.success({message:e.msg,duration:1e3}),this.loading=!1,this.tableData=e.data.records,this.total=parseInt(e.data.total)},downLoad(){this.getPdf(this.title)},fullScreen(){let e=document.fullscreenElement;e?document.exitFullscreen():document.documentElement.requestFullscreen()}}},n=s,r=a(1001),i=(0,r.Z)(n,o,l,!1,null,null,null),c=i.exports}}]);
//# sourceMappingURL=343.f97df85e.js.map